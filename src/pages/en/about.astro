---
import EducationCard from '../../components/about/EducationCard.astro';
import ExperienceCard from '../../components/about/ExperienceCard.astro';
import ProfileCard from '../../components/about/ProfileCard.astro';
import SkillsCard from '../../components/about/SkillsCard.astro';
import SummaryCard from '../../components/about/SummaryCard.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';
import BaseLayout from '../../layouts/BaseLayout.astro';
import experiencesData from '../../i18n/languages/experiences/en.json';

const lang = getLangFromUrl(Astro.url) as "en" | "es";
const t = useTranslations(lang);

const sections = [
  { id: 'summary', label: t('about.summary.title') },
  { id: 'experience', label: t('about.experience.title') },
  { id: 'skills', label: t('about.skills.title') },
  { id: 'education', label: t('about.education.title') }
];
---

<BaseLayout title={t('about.title')} lang={lang}>
  <div class="mx-auto min-h-screen max-w-screen-xl px-6 py-12 font-sans md:px-12 md:py-20 lg:px-24 lg:py-0">
    <div class="lg:flex lg:justify-between lg:gap-10">
      <!-- Left column / Mobile header -->
      <header class="lg:sticky lg:top-0 lg:flex lg:max-h-screen lg:w-1/2 lg:flex-col lg:justify-between lg:py-24">
        <ProfileCard
          role={t('about.role')}
          tagline={t('about.tagline')}
          description={t('about.description')}
          sections={sections}
        />
      </header>

      <!-- Main scrollable content -->
      <main class="pt-24 lg:w-1/2 lg:py-24">
        <div class="space-y-16">
          <section id="summary" class="group/section">
            <SummaryCard
              title={t("about.summary.title")}
              summary={t("about.summary.content")}
            />
          </section>
          
          <section id="experience" class="group/section">
            <ExperienceCard
              title={t('about.experience.title')}
              experiences={experiencesData.experiences}
            />
          </section>

          <section id="skills" class="group/section">
            <SkillsCard
              title={t('about.skills.title')}
              languagesTitle={t('about.skills.languages')}
              frameworksTitle={t('about.skills.frameworks')}
              toolsTitle={t('about.skills.tools')}
              otherTitle={t('about.skills.other')}
            />
          </section>

          <section id="education" class="group/section">
            <EducationCard
              title={t('about.education.title')}
              degree={t('about.education.degree')}
              period={t('about.education.period')}
              description={t('about.education.description')}
            />
          </section>
        </div>
      </main>
    </div>
  </div>
</BaseLayout>

<style>
  /* Smooth scrolling between sections */
  html {
    scroll-behavior: smooth;
  }

  /* Ensure sections have enough padding for scrolling */
  section {
    scroll-margin-top: 2rem;
  }
</style> 