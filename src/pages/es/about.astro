---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ProfileCard from '../../components/about/ProfileCard.astro';
import ExperienceCard from '../../components/about/ExperienceCard.astro';
import SkillsCard from '../../components/about/SkillsCard.astro';
import EducationCard from '../../components/about/EducationCard.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url) as "en" | "es";
const t = useTranslations(lang);
---

<BaseLayout title={t('about.title')} lang={lang}>
  <div class="min-h-screen lg:flex lg:flex-row lg:gap-4 about-page">
    <!-- Columna izquierda / Header en mÃ³vil -->
    <header class="bg-base-200 lg:sticky lg:top-0 lg:flex lg:max-h-screen lg:w-[48%] lg:flex-col lg:justify-between lg:py-24">
        <ProfileCard
          role={t('about.role')}
          tagline={t('about.tagline')}
          description={t('about.description')}
        />
    </header>

    <!-- Contenido principal scrolleable -->
    <main class="pt-24 lg:w-[52%] lg:py-24">
      <div class="max-w-3xl mx-auto space-y-16">
        <section>
          <ExperienceCard
            title={t('about.experience.title')}
            currentRole={t('about.experience.current.role')}
            currentPeriod={t('about.experience.current.period')}
            currentDescription={t('about.experience.current.description')}
          />
        </section>

        <section>
          <SkillsCard
            title={t('about.skills.title')}
            languagesTitle={t('about.skills.languages')}
            frameworksTitle={t('about.skills.frameworks')}
            toolsTitle={t('about.skills.tools')}
            otherTitle={t('about.skills.other')}
          />
        </section>

        <section>
          <EducationCard
            title={t('about.education.title')}
            degree={t('about.education.degree')}
            period={t('about.education.period')}
            description={t('about.education.description')}
          />
        </section>
      </div>
    </main>
  </div>
</BaseLayout>

<style>
  /* Aseguramos que el aside tenga un fondo que se extienda completamente */
  aside {
    position: relative;
  }

  aside::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100vw;
    right: 0;
    bottom: 0;
    background-color: hsl(var(--b2));
    z-index: -1;
  }

  /* Ajustes para el scroll suave entre secciones */
  html {
    scroll-behavior: smooth;
  }

  /* Aseguramos que las secciones tengan suficiente padding para el scroll */
  section {
    scroll-margin-top: 2rem;
  }
</style> 